/* Reset + body */
* { box-sizing: border-box; }
html, body { margin:0; padding:0; height:100%; overflow:hidden; color:#111;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, Helvetica, sans-serif;
  /* Fullscreen background (video will sit behind content) */
  background-color:#000; /* fallback while video loads */
  background-size:cover;          /* fill entire screen */
  background-position:center;     /* keep centered */
  background-repeat:no-repeat;
}


/* Fullscreen background video */
#video-bg { position:fixed; inset:0; z-index:0; overflow:hidden; }
#video-bg .bg-video { position:absolute; inset:0; width:100%; height:100%; object-fit:cover; opacity:0; transition:none; }
#video-bg .bg-video.active { opacity:1; }

/* Stage */
#stage-wrap { position:relative; z-index:1; width:100vw; height:100vh; display:grid; place-items:center; background:transparent; }
.stage { position:relative; width:calc(var(--design-w) * 1px); height:calc(var(--design-h) * 1px); transform-origin:top left; }
.stage .bg { position:absolute; inset:0; width:100%; height:100%; object-fit:cover; pointer-events:none; user-select:none; }
.desk-overlay { position:absolute; transform-origin:top left; pointer-events:none; user-select:none; z-index:1; }

/* Hotspots (now visible with stickers) */
.hotspot { position:absolute; display:block; transform-origin:top left; z-index:2; cursor:none; transition:transform 0.2s ease-out; }
.hotspot:hover { transform:scale(1.02); }
.hotspot img { width:100%; height:100%; object-fit:contain; display:block; pointer-events:none; }

/* Frog Queen easter egg - no hover effects or cursor change */
#frogQueenLink { cursor:none; }
#frogQueenLink:hover { transform:none; }

/* Custom Cursor */
.custom-cursor {
  position: fixed;
  width: 850px;
  height: 850px;
  pointer-events: none;
  z-index: 10001;
  left: 0;
  top: 0;
  opacity: 0;
  transition: opacity 0.3s ease;
  mix-blend-mode: normal;
  transform-origin: 0% 0%; /* Moved closer to cursor */
}

.custom-cursor img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.3));
}

/* Hide default cursor - desktop only */
@media (min-width: 768px) {
  body {
    cursor: none;
  }

  a, button, input, textarea, select, .hotspot, [role="button"], [onclick] {
    cursor: none;
  }
}

/* Show default cursor on mobile */
@media (max-width: 767px) {
  body {
    cursor: auto;
  }

  a, button, input, textarea, select, .hotspot, [role="button"], [onclick] {
    cursor: pointer;
  }

  /* Hide custom cursor element on mobile */
  .custom-cursor {
    display: none !important;
  }

  /* Mobile Guestbook Page Adjustments */
  .guestbook-card {
    width: 95vw;
    height: auto;
    max-width: none;
    max-height: none;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    background: #fff;
  }

  .guestbook-wrap {
    flex-direction: column;
    gap: 20px;
    align-items: stretch;
  }

  .book-form {
    width: 100%;
    padding: 10px;
    box-sizing: border-box;
    
  }

  .form-group label {
    font-size: 16px;
  }

  .form-group input,
  .form-group textarea {
    font-size: 14px;
  }

  .book-btn {
    font-size: 16px;
    padding: 12px 20px;
  }

  /* Mobile-specific font scaling for artist bio */
  @media (max-width: 767px) {
    .slide-bio {
      font-size: calc(14px + 0.25vw);
    }
  }

  /* Mobile-specific scaling adjustments */
  #stage-wrap {
    /* Allow scrolling on mobile if content is too large */
    overflow: auto;
    -webkit-overflow-scrolling: touch;
  }
  
  /* Ensure the stage can be scrolled if needed */
  .stage {
    /* Stage is scaled up 50% more via JavaScript on mobile */
    /* This ensures proper touch targets */
  }
  
  /* Make hotspots larger for better touch targets */
  .hotspot {
    /* Minimum touch target size for mobile */
    min-width: 44px;
    min-height: 44px;
  }
  
  /* Adjust overlay modals for mobile */
  .overlay-card {
    max-width: 95vw;
    max-height: 95vh;
    margin: 10px;
  }
  
  /* Adjust music player position on mobile */
  .music-player {
    bottom: 10px;
    left: 10px;
    transform: scale(0.9);
  }
  
  /* Mobile-specific overlay optimizations */
  .overlay {
    padding: 10px;
  }
  
  /* Guest book mobile optimization: keep desktop look, just scaled */
  .guestbook-card {
    width: min(96vw, 1200px);
    height: min(90vh, 800px);
    max-width: 96vw;
    max-height: 90vh;
  }

  .open-book {
    width: min(96vw, 1200px);
    height: min(90vh, 800px);
    max-width: 96vw;
    max-height: 90vh;
    flex-direction: row; /* Maintain two-page spread like desktop */
    gap: 0;
    padding: 0;
    animation: none; /* Calmer on mobile */
    transform: translate(-50%, -50%) scale(0.92); /* scale down while centered */
  }

  .book-page {
    width: 50%;
    padding: 24px 18px;
    margin: 0;
    border-radius: 8px;
  }
  
  .left-page, .right-page {
    border-radius: 4px;
    margin: 0;
  }
  
  /* Simplify book styling on mobile */
  .open-book::before,
  .open-book::after,
  .left-page::after,
  .right-page::before {
    display: none;
  }
  
  /* Adjust form elements for mobile */
  .book-heading {
    font-size: 20px;
    padding-left: 20px;
  }
  
  .book-heading::after {
    left: 20px;
  }
  
  .form-group label {
    padding-left: 20px;
    font-size: 14px;
  }
  
  .book-btn {
    font-size: 16px;
    padding: 10px 20px;
  }
  
  /* Comments section mobile */
  .comments-area {
    max-height: 300px;
    overflow-y: auto;
  }
  
  .comment {
    padding: 6px;
    margin-bottom: 2px;
  }
  
  .comment-text {
    font-size: 12px;
  }
  
  /* Music overlay mobile */
  #musicOverlay .overlay-card {
    width: 100vw;
    height: 100vh;
    max-width: 100vw;
    max-height: 100vh;
    padding: 10px;
    border-radius: 0;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }
  
  /* Override desktop overflow settings for mobile */
  #musicOverlay .overlay-card {
    overflow-y: visible !important;
    overflow-x: hidden !important;
  }
  
  /* Close button for music overlay */
  #musicOverlay .close-btn {
    position: fixed;
    z-index: 10;
  }
  
  /* Filter section container */
  #musicFilters {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin-bottom: 10px;
    flex-shrink: 0;
  }
  
  /* Type filters container - compact in topbar */
  .type-filters {
    display: flex;
    flex-wrap: nowrap;
    gap: 6px;
    justify-content: flex-start;
    padding: 0;
    background: transparent;
    border-radius: 8px;
    width: auto;
    max-width: none;
  }
  
  /* Artist filter section */
  .chipbar {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 8px;
    padding: 0;
    background: transparent;
    margin: 0;
    overflow: hidden;
  }
  
  /* Artist chips container - multi-row wrap */
  #artistChips {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    justify-content: center;
    padding: 8px;
    background: rgba(255, 255, 255, 0.95);
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    max-height: 120px;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }
  
  /* Keep chips visible on mobile; hide the separator to save space */
  .chip-sep { display: none; }
  
  /* Chips styling */
  .chip {
    font-size: 11px;
    padding: 5px 10px;
    white-space: nowrap;
  }
  
  /* Music grid - 2 columns on mobile */
  .music-grid {
    grid-template-columns: repeat(2, 1fr) !important; /* 2 columns for mobile */
    gap: 10px !important;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    padding: 0 5px 10px 5px;
    flex: 1;
    min-height: 0;
  }
  
  /* Card styling for mobile - vertical layout with fixed height */
  .card {
    display: flex;
    flex-direction: column;
    height: 280px; /* Fixed height for consistency */
    overflow: hidden;
    border: 1px solid #eee;
    border-radius: 12px;
    background: #fff;
  }
  
  /* Cover takes full width */
  .cover-wrap {
    width: 100%;
    aspect-ratio: 1/1;
    flex-shrink: 0;
    background: #f4f4f4;
    overflow: hidden;
    border-radius: 12px 12px 0 0;
  }
  
  /* Ensure cover image fills container properly as a square */
  .cover-wrap img {
    width: 100%;
    height: 100%;
    object-fit: cover; /* Changed from contain to cover to fill the square */
    display: block;
  }
  
  /* Card body below cover */
  .card-body {
    padding: 8px 10px;
    display: flex;
    flex-direction: column;
    gap: 4px; /* Reduced gap between title and meta */
    flex: 1;
    min-height: 0;
    overflow: hidden;
  }
  
  /* Title and meta */
  .card-title {
    font-size: 14px;
    font-weight: 700;
    line-height: 1.2;
    margin-bottom: 0;
    height: 34px; /* Fixed height for 2 lines */
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
  }
  
  .card-meta {
    font-size: 12px;
    color: #666;
    margin-bottom: 0;
    line-height: 1.2;
  }
  
  /* Card bottom section */
  .card-bottom {
    margin-top: auto;
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  
  /* Links container - vertical stack for better mobile UX */
  .card-links {
    display: flex;
    flex-direction: column;
    gap: 6px;
    width: 100%;
  }
  
  /* Buttons - full width with better styling */
  .btn-sm {
    font-size: 11px;
    padding: 8px 10px;
    width: 100%;
    text-align: center;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    border: 1px solid #ddd;
    border-radius: 8px;
    background: #fafafa;
    text-decoration: none;
    color: #111;
    display: block;
    transition: all 0.2s ease;
  }
  
  .btn-sm:hover {
    background: #f0f0f0;
    border-color: #ccc;
  }
  
  /* Style missing links differently */
  .btn-sm.missing {
    background-color: #ffcccc;
    color: #ff0000;
    opacity: 0.5;
    pointer-events: none;
  }
  
  /* Adjust overflow title */
  #musicOverlay .overlay-title {
    margin-bottom: 10px;
    font-size: 20px;
  }
  
  /* Music header with dropdown on mobile */
  .music-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 10px;
  }
  
  /* Artist dropdown - mobile only */
  .artist-dropdown-container {
    position: relative;
    display: block;
  }
  
  .artist-dropdown-btn {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 12px;
    background: #f0f0f0;
    border: 1px solid #ddd;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
  }
  
  .artist-dropdown-btn:hover {
    background: #e8e8e8;
    border-color: #ccc;
  }
  
  .artist-dropdown-btn.active {
    background: #e8e8e8;
    border-color: #999;
  }
  
  .dropdown-arrow {
    transition: transform 0.2s ease;
  }
  
  .artist-dropdown-btn.active .dropdown-arrow {
    transform: rotate(180deg);
  }
  
  .artist-dropdown-menu {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    margin-top: 4px;
    background: white;
    border: 1px solid #ddd;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    max-height: 60vh;
    overflow-y: auto;
    z-index: 100;
    display: none;
  }
  
  .artist-dropdown-menu.show {
    display: block;
  }
  
  .dropdown-item {
    display: block;
    width: 100%;
    padding: 10px 16px;
    border: none;
    background: none;
    text-align: left;
    font-size: 14px;
    cursor: pointer;
    transition: background 0.2s ease;
  }
  
  .dropdown-item:hover {
    background: #f5f5f5;
  }
  
  .dropdown-item.active {
    background: #e8e8e8;
    font-weight: 600;
  }
  
  /* Artists carousel mobile */
  .artists-card {
    padding: 0;
    width: 100%;
    height: 100%;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
  }

  .carousel, .carousel-track {
    height: 100%;
  }

  .slide {
    height: 100%;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 20px 15px !important; /* Override desktop styles */
    gap: 15px !important; /* Override desktop styles */
    text-align: center;
    -webkit-overflow-scrolling: touch;
  }
  
  .slide-title {
    font-size: 24px;
    font-weight: 800;
    color: #fff;
    text-shadow: 0 2px 4px rgba(0,0,0,0.6);
  }
  
  .portrait {
    max-width: 85vw;
    max-height: 40vh;
    width: auto;
    object-fit: contain;
    margin: 0;
  }
  
  .slide-bio {
    font-size: 14px;
    line-height: 1.5;
    color: #f0f0f0;
    text-shadow: 0 1px 3px rgba(0,0,0,0.6);
    max-width: 95%;
  }
  
  .carousel-help { 
    display: none !important; 
  }
  
  /* Document/Camera overlay mobile */
  #documentOverlay .camera-stage {
    transform: scale(1) !important; /* Reset scale on mobile */
    width: 100vw;
    height: 100vh;
  }
  
  .camera-overlay {
    display: none; /* Hide camera frame on mobile */
  }
  
  .document-viewer {
    position: relative;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    padding: 10px;
  }
  
  .viewer-buttons {
    grid-template-columns: repeat(5, 1fr); /* 5 columns on mobile */
    gap: 4px;
    padding: 6px;
    font-size: 10px;
  }
  
  .viewer-btn {
    font-size: 10px;
    padding: 8px 4px;
  }
  
  .video-container {
    height: calc(100% - 120px);
  }
  
  .playlist-nav {
    gap: 10px;
    padding: 8px;
  }
  
  .nav-btn {
    width: 35px;
    height: 35px;
  }
  
  .video-info {
    font-size: 12px;
  }
  
  /* About overlay mobile */
  .about-sheet {
    max-width: 95vw;
    max-height: 90vh;
  }
  
  /* Close button adjustments */
  .close-btn {
    font-size: 24px;
    top: 5px;
    right: 5px;
    background: rgba(0, 0, 0, 0.5);
    color: white;
    width: 35px;
    height: 35px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .camera-close {
    display: flex !important;
  }
}

/* Lottie FX */
#fx-overlay { position:fixed; inset:0; background:rgba(0,0,0,.20); display:none; align-items:center; justify-content:center; z-index:9999; backdrop-filter:blur(2px); }
#fx-lottie { width:min(520px,70vw); height:min(520px,70vw); pointer-events:none; }

/* Overlay (blur + card) */
.overlay { position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:9998; background:rgba(0,0,0,.25); backdrop-filter:blur(6px); }
.overlay.show { display:flex; }
.overlay-card { position:relative; background:#fff; border-radius:12px; box-shadow:0 20px 80px rgba(0,0,0,.25); max-width:min(960px,92vw); max-height:min(86vh,980px); padding:min(2vw,18px); overflow:auto; }
.guestbook-overlay .overlay-card { overflow: visible !important; }
.overlay-wide { max-width:min(1200px,96vw); }
.overlay-title { margin:0 0 12px; font-size:22px; }
.close-btn { position:absolute; top:6px; right:10px; border:none; background:transparent; font-size:28px; line-height:1; cursor:none; }

/* Guestbook layout */
.guestbook-card {
  /* Make the guestbook nearly fill the viewport */
  width: min(96vw, 2400px);
  height: min(90vh, 1400px);
  background: transparent !important;
  box-shadow: none !important;
  border: none !important;
  padding: 0;
  overflow: visible !important; /* Allow animation to start from outside */
}
.guestbook-wrap {
  position: relative;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}
.guestbook-sheet {
  /* Hide the pencil background image */
  display: none;
}
.book-overlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
  overflow: visible; /* Allow animation to start from outside */
}
.book-overlay * { pointer-events: auto; }

/* Open Book Layout - Marble Composition Notebook */
.open-book {
  display: flex;
  width: min(85vw, 1400px);
  height: min(90vh, 1000px);
  max-width: 1200px;
  max-height: 850px;
  perspective: 1500px;
  gap: 0;
  margin: 0 auto;
  /* Simple black marble texture */
  background: #000;
  border-radius: 8px;
  overflow: hidden;
  position: fixed !important;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  /* Thick black tape binding */
  border: 2px solid #000;
  box-shadow: 
    0 0 0 4px #000,
    0 8px 20px rgba(0,0,0,0.3),
    inset 0 0 20px rgba(0,0,0,0.1);
  /* Animation */
  animation: slideDownFromTop 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

/* Slide down animation from actual page top */
@keyframes slideDownFromTop {
  from {
    transform: translate(-50%, calc(-50% - 100vh - 100px));
    opacity: 0;
  }
  50% {
    opacity: 1;
  }
  80% {
    transform: translate(-50%, calc(-50% + 30px));
  }
  to {
    transform: translate(-50%, -50%);
    opacity: 1;
  }
}

/* Page edges - left side pages */
.open-book::before {
  content: '';
  position: absolute;
  left: 4px;
  top: 4px;
  bottom: 4px;
  width: 6px;
  background: 
    repeating-linear-gradient(
      0deg,
      #f8f8f8 0px,
      #f8f8f8 1px,
      #e0e0e0 1px,
      #e0e0e0 2px
    );
  border-left: 1px solid rgba(0,0,0,0.2);
  box-shadow: 
    inset 2px 0 3px rgba(0,0,0,0.15),
    inset -1px 0 2px rgba(0,0,0,0.1);
  z-index: 1;
}

/* Page edges - right side pages */
.open-book::after {
  content: '';
  position: absolute;
  right: 4px;
  top: 4px;
  bottom: 4px;
  width: 6px;
  background: 
    repeating-linear-gradient(
      0deg,
      #f8f8f8 0px,
      #f8f8f8 1px,
      #e0e0e0 1px,
      #e0e0e0 2px
    );
  border-right: 1px solid rgba(0,0,0,0.2);
  box-shadow: 
    inset -2px 0 3px rgba(0,0,0,0.15),
    inset 1px 0 2px rgba(0,0,0,0.1);
  z-index: 1;
}

/* Book Pages */
.book-page {
  flex: 1;
  position: relative;
  padding: 40px 32px;
  background: #fefefe;
  border-radius: 12px;
  box-shadow: 
    0 12px 30px rgba(0,0,0,0.18),
    inset 0 0 0 1px rgba(0,0,0,0.05),
    inset -2px 0 4px rgba(0,0,0,0.05);
  display: flex;
  flex-direction: column;
  transition: all 0.3s ease;
}

.left-page {
  background: 
    /* Notebook paper white */
    #f8f8f8;
  border-radius: 4px 0 0 4px;
  transform-origin: right center;
  box-shadow: 
    /* Simple shadows for notebook pages */
    0 2px 8px rgba(0,0,0,0.1),
    inset 0 0 0 1px rgba(0,0,0,0.05),
    /* Spine shadow */
    inset 3px 0 5px rgba(0,0,0,0.15);
  position: relative;
  margin-left: 10px; /* Space for page edges */
}

/* Book spine crease */
.left-page::after {
  content: '';
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
  width: 4px;
  background: linear-gradient(90deg, transparent 0%, rgba(0,0,0,0.1) 50%, transparent 100%);
  pointer-events: none;
}

.right-page {
  background: 
    /* Notebook paper white */
    #f8f8f8;
  border-radius: 0 4px 4px 0;
  transform-origin: left center;
  box-shadow: 
    /* Simple shadows for notebook pages */
    0 2px 8px rgba(0,0,0,0.1),
    inset 0 0 0 1px rgba(0,0,0,0.05),
    /* Spine shadow */
    inset -3px 0 5px rgba(0,0,0,0.15);
  position: relative;
  margin-right: 10px; /* Space for page edges */
}

/* Book spine crease for right page */
.right-page::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 4px;
  background: linear-gradient(90deg, transparent 0%, rgba(0,0,0,0.1) 50%, transparent 100%);
  pointer-events: none;
}

.page-content {
  height: 100%;
  display: flex;
  flex-direction: column;
  gap: 16px;
  font-family: 'Kalam', 'Comic Sans MS', 'Marker Felt', cursive;
  position: relative;
}

/* Blue ruled lines like composition notebook */
.page-content::before {
  content: '';
  position: absolute;
  top: 50px;
  left: 0;
  right: 0;
  bottom: 30px;
  background-image: 
    /* Red margin line */
    linear-gradient(90deg, transparent 60px, #ff6b6b 60px, #ff6b6b 62px, transparent 62px),
    /* Blue horizontal lines */
    repeating-linear-gradient(
      transparent,
      transparent 22px,
      #4a90e2 22px,
      #4a90e2 23px
    );
  pointer-events: none;
  z-index: 0;
}

/* Make content appear above lines */
.page-content > * {
  position: relative;
  z-index: 1;
}

/* Left Page Content */
.mailing-section,
.guestbook-section {
  display: flex;
  flex-direction: column;
  gap: 12px;
}
.mailing-section { flex: 0 0 auto; }
.guestbook-section { flex: 1 1 auto; }
/* Make the guestbook form fill available height and pin the button to bottom */
.guestbook-section .book-form {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0; /* allow flex children to shrink */
}
.guestbook-section textarea {
  flex: 1;
  min-height: 0;
  resize: none; /* remove adjustable height */
}
/* Make the textarea group expand to just above the button */
.guestbook-section .book-form .form-group:nth-child(2) {
  flex: 1 1 auto;
  min-height: 0;
  display: flex;
  flex-direction: column;
}
.guestbook-section .book-form .form-group:nth-child(2) textarea {
  flex: 1 1 auto;
}
.guestbook-section .book-btn {
  margin-top: auto; /* push button to bottom */
}

.book-heading {
  font-size: 24px;
  font-weight: 700;
  color: #2d3436;
  margin: 0 0 20px 0;
  text-align: left;
  padding-left: 70px;
  font-family: 'Kalam', 'Comic Sans MS', 'Marker Felt', cursive;
  border-bottom: none;
  padding-bottom: 0;
  position: relative;
  letter-spacing: -1px;
  transform: rotate(-1deg);
  text-transform: uppercase;
}

/* Underline doodle under headings */
.book-heading::after {
  content: '';
  position: absolute;
  bottom: -5px;
  left: 70px;
  width: 60%;
  height: 3px;
  background: #4a90e2;
  transform: skewY(-1deg);
  border-radius: 2px;
}

.book-form {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.form-group {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.form-group label {
  font-size: 16px;
  font-weight: 700;
  color: #2d3436;
  font-family: 'Kalam', 'Comic Sans MS', 'Marker Felt', cursive;
  transform: rotate(-0.3deg);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  padding-left: 70px;
}

.form-group input,
.form-group textarea {
  padding: 8px 10px;
  border: 2px solid #4a90e2;
  border-radius: 8px;
  background: #f8f8f8;
  font-size: 16px;
  font-family: 'Kalam', 'Comic Sans MS', 'Marker Felt', cursive;
  color: #2d3436;
  box-shadow: none;
  transition: all 0.2s ease;
  letter-spacing: 0.5px;
  transform: rotate(-0.2deg);
}

.form-group textarea {
  line-height: 1.6;
}

.form-group input:focus,
.form-group textarea:focus {
  outline: none;
  border-color: #ff6b6b;
  background: #fff;
  transform: rotate(0deg) scale(1.02);
}

.book-btn {
  padding: 12px 24px;
  border-radius: 20px;
  border: 3px solid #4a90e2;
  background: #fff;
  color: #4a90e2;
  font-weight: 700;
  cursor: none;
  transition: all 0.2s ease;
  font-family: 'Kalam', 'Comic Sans MS', 'Marker Felt', cursive;
  box-shadow: 3px 3px 0 #4a90e2;
  font-size: 18px;
  transform: rotate(-0.5deg);
  text-transform: uppercase;
  letter-spacing: 1px;
}

.book-btn:hover {
  background: #4a90e2;
  color: #fff;
  transform: rotate(0.5deg) translateY(-2px);
  box-shadow: 5px 5px 0 #2d3436;
}

/* Right Page Content */
.filter-controls {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-bottom: 12px;
  padding-bottom: 10px;
  border-bottom: 3px dashed #4a90e2;
  position: relative;
}

/* Remove decorative flourish */
.filter-controls::after {
  display: none;
}

.filter-label {
  font-size: 16px;
  font-weight: 700;
  color: #2d3436;
  font-family: 'Kalam', 'Comic Sans MS', 'Marker Felt', cursive;
  text-transform: uppercase;
  letter-spacing: 1px;
  transform: rotate(-0.5deg);
  padding-left: 70px;
}

.filter-buttons {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.filter-btn {
  padding: 6px 12px;
  border: 2px solid #4a90e2;
  background: #fff;
  border-radius: 15px;
  cursor: none;
  font-size: 13px;
  transition: all 0.2s ease;
  font-family: inherit;
  transform: rotate(-0.5deg);
  font-weight: 600;
}

.filter-btn.active {
  background: #4a90e2;
  color: white;
  border-color: #4a90e2;
  box-shadow: 2px 2px 0 #2d3436;
  transform: rotate(0.5deg);
}

.filter-btn:hover:not(.active) {
  background: #e3f2fd;
  border-color: #ff6b6b;
  transform: rotate(0.5deg) scale(1.05);
}

.comments-area {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 8px;
  overflow: hidden;
  position: relative;
  padding-right: 4px;
}

.comment {
  border: 2px dashed #4a90e2;
  border-radius: 8px;
  background: #fff;
  padding: 8px;
  display: flex;
  flex-direction: column;
  gap: 4px;
  position: relative;
  box-shadow: none;
  transform: rotate(-0.3deg);
  margin-bottom: 4px;
}

.comment-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2px;
}

.comment-author {
  font-weight: 600;
  font-size: 13px;
  color: #2c2c2c;
  font-family: 'Kalam', 'Comic Sans MS', 'Marker Felt', cursive;
  transform: rotate(-0.5deg);
  display: inline-block;
}

.comment-date {
  font-size: 10px;
  color: #888;
}

.comment-text {
  white-space: pre-wrap;
  font-size: 13px;
  line-height: 1.3;
  color: #333;
  margin-bottom: 4px;
  font-family: 'Kalam', 'Comic Sans MS', 'Marker Felt', cursive;
  letter-spacing: 0.2px;
  word-spacing: 1px;
  transform: rotate(0.2deg);
}

.comment-actions {
  display: flex;
  gap: 8px;
  align-items: center;
}

.vote-btn {
  display: inline-flex;
  align-items: center;
  gap: 3px;
  border: 2px solid #4a90e2;
  border-radius: 10px;
  padding: 3px 6px;
  background: #fff;
  cursor: none;
  font-size: 11px;
  transition: all 0.2s ease;
  transform: rotate(-0.3deg);
  font-weight: 600;
}

.vote-btn:hover {
  background: #e3f2fd;
  border-color: #ff6b6b;
  transform: rotate(0.3deg) scale(1.05);
}

.vote-btn.liked {
  background: #4a90e2;
  border-color: #4a90e2;
  color: #fff;
  box-shadow: 2px 2px 0 #2d3436;
}

.vote-btn.disliked {
  background: #4a90e2;
  border-color: #4a90e2;
  color: #fff;
  box-shadow: 2px 2px 0 #2d3436;
}

/* Page navigation */
.page-navigation {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16px;
  margin-top: auto;
  padding-top: 12px;
}

.nav-btn {
  background: transparent;
  border: 2px solid #4a90e2;
  border-radius: 50%;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: none;
  font-size: 18px;
  color: #4a90e2;
  font-weight: 700;
  transition: all 0.2s ease;
  font-family: 'Kalam', 'Comic Sans MS', 'Marker Felt', cursive;
  transform: rotate(-2deg);
}

.nav-btn:hover:not(:disabled) {
  background: #4a90e2;
  color: #fff;
  transform: rotate(2deg) scale(1.1);
  box-shadow: 2px 2px 0 #2d3436;
}

.nav-btn:disabled {
  opacity: 0.3;
  cursor: not-allowed;
  border-color: #ccc;
  color: #ccc;
}

.nav-btn:active:not(:disabled) {
  transform: scale(0.95);
}

.page-info {
  font-size: 13px;
  color: #666;
  font-family: 'Kalam', 'Comic Sans MS', 'Marker Felt', cursive;
}

.no-comments {
  text-align: center;
  color: #999;
  font-style: italic;
  padding: 24px;
  font-family: 'Kalam', 'Comic Sans MS', 'Marker Felt', cursive;
  font-size: 16px;
  line-height: 1.6;
  transform: rotate(-0.3deg);
}

.success-message {
  color: #28a745 !important;
  font-size: 12px !important;
  margin-top: 8px !important;
  text-align: center !important;
}
.overlay { position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:9998; background:rgba(0,0,0,.25); backdrop-filter:blur(6px); }
.overlay.show { display:flex; }
.overlay-card { position:relative; background:#fff; border-radius:12px; box-shadow:0 20px 80px rgba(0,0,0,.25); max-width:min(960px,92vw); max-height:min(86vh,980px); padding:min(2vw,18px); overflow:hidden; }
.overlay-wide { max-width:min(2000px,98vw); }
.overlay-title { margin:0 0 12px; font-size:22px; }
/* Fixed corner title for Music overlay */

/* Hide artist dropdown on desktop */
@media (min-width: 768px) {
  .artist-dropdown-container { display: none; }
  .music-header { display: none !important; } /* remove spacer so filters touch the top */
  /* Fix card title clipping on desktop */
  .card-title { height: auto; min-height: 2.4em; }
  /* Increase card height to prevent link clipping */
  .music-grid .card { height: 340px !important; }
  /* Prevent any resize/sort cursors on filter buttons */
  .chip, .type-filters, #musicFilters {
    cursor: none !important;
    -webkit-user-drag: none;
    -khtml-user-drag: none;
    -moz-user-drag: none;
    -o-user-drag: none;
    user-drag: none;
  }
}
.close-btn { position:absolute; top:6px; right:10px; border:none; background:transparent; font-size:28px; line-height:1; cursor:none; }

/* About transparent image */
.about-card { background:transparent; box-shadow:none; padding:0; max-width:none; max-height:none; }
.about-sheet { display:block; max-width:min(90vw,1400px); max-height:min(88vh,1400px); width:auto; height:auto; }

/* Music */
/* Keep the Music modal a consistent window size regardless of filter */
#musicOverlay .overlay-card { width:100vw !important; height:100vh !important; max-width:none !important; max-height:none !important; padding:0 !important; border-radius:0 !important; box-shadow:none !important; overflow:hidden !important; position:relative; }

/* Two-column layout: left Walkman, right content */
#musicOverlay .overlay-card { --topbar-h: 56px; }
#musicOverlay .music-topbar { position:fixed; top:0; left:0; right:0; z-index:10000; display:flex; align-items:center; gap:12px; height:var(--topbar-h); padding:8px 12px; background:rgba(0,0,0,0.55); backdrop-filter: blur(10px); border-radius:0; }
#musicOverlay .music-topbar .topbar-title { color:#fff; font-weight:800; font-size:20px; letter-spacing:0.2px; text-shadow:0 2px 4px rgba(0,0,0,0.45); white-space:nowrap; }
#musicOverlay .music-topbar .chipbar { flex:1 1 auto; margin:0; position:relative; z-index:auto; padding:0 4px; min-height:44px; }
#musicOverlay .music-topbar .type-filters { background:transparent; padding:0; width:auto; max-width:none; }
#musicOverlay .topbar-close { margin-left:auto; width:36px; height:36px; border-radius:50%; border:1px solid rgba(255,255,255,0.6); background:rgba(255,255,255,0.12); color:#fff; display:flex; align-items:center; justify-content:center; font-size:20px; line-height:1; box-shadow:0 2px 8px rgba(0,0,0,0.25); cursor:none; }
#musicOverlay .topbar-close:hover { background:rgba(255,255,255,0.22); }
#musicOverlay .music-layout { display:grid; grid-template-columns: 1fr 1fr; gap:16px; align-items:stretch; height:calc(100vh - var(--topbar-h)); margin-top:var(--topbar-h); }
#musicOverlay .walkman-panel { display:flex; align-items:flex-start; justify-content:center; padding:8px 4px; min-height:0; position:relative; }
#musicOverlay .walkman-panel img { max-height:100%; width:auto; height:auto; max-width:100%; display:block; object-fit:contain; object-position: top center; filter: drop-shadow(0 8px 18px rgba(0,0,0,0.4)); position:relative; z-index:1; }
#musicOverlay .music-content { display:flex; flex-direction:column; min-width:0; height:100%; margin-top:0; padding-top:4px; padding-bottom:24px; overflow-y:auto; overscroll-behavior:contain; scrollbar-width:none; -ms-overflow-style:none; }
#musicOverlay .music-content::-webkit-scrollbar { width:0; height:0; }
/* Walkman notes FX overlay */
#walkmanFx { position:absolute; inset:0; pointer-events:none; overflow:visible; z-index:0; }
#walkmanFx .note { position:absolute; left:var(--x,0px); top:var(--y,0px); font-size:var(--size,22px); color:var(--color,#fff); text-shadow:0 2px 6px rgba(0,0,0,0.45); opacity:0; transform:translate3d(0,0,0) scale(.8) rotate(0deg); animation: noteFloat var(--dur,1600ms) cubic-bezier(.22,.61,.36,1) forwards; will-change: transform, opacity; }
@keyframes noteFloat { 
  0% { opacity:0; transform: translate(0,0) scale(.8) rotate(var(--rotStart,-10deg)); }
  10% { opacity:1; }
  100% { opacity:0; transform: translate(var(--dx,0px), var(--dy,-160px)) scale(1.4) rotate(var(--rotEnd,20deg)); }
}
/* Sad fall/disintegrate after music stops */
@keyframes noteFall {
  0%   { opacity:.95; transform: translate3d(0,0,0) scale(1) rotate(var(--rotStartFall, 0deg)); filter: grayscale(0%) blur(0px); color: var(--startColor, #ffffff); }
  60%  { opacity:.62; transform: translate3d(calc(var(--fdx, 0px) * .6), calc(var(--fdy, 220px) * .6), 0) scale(.94) rotate(var(--rotEndFall, 12deg)); filter: grayscale(65%) blur(.5px); color: #d6d6d6; }
  100% { opacity:0; transform: translate3d(var(--fdx, 0px), var(--fdy, 220px), 0) scale(.86) rotate(var(--rotEndFall, 12deg)); filter: grayscale(100%) blur(1.1px); color: #bebebe; }
}
#walkmanFx .dust { position:absolute; left:var(--x,0px); top:var(--y,0px); width:3px; height:3px; background: currentColor; border-radius:50%; opacity:.85; pointer-events:none; animation: dustFall var(--dur,900ms) ease-out forwards; will-change: transform, opacity; filter: grayscale(100%) blur(.4px); }
@keyframes dustFall { 0% { opacity:.85; transform: translate3d(0,0,0) scale(1);} 100% { opacity:0; transform: translate3d(var(--dx,0px), var(--dy,220px), 0) scale(.6);} }
@media (max-width: 1180px) {
  #musicOverlay .music-layout { grid-template-columns: 1fr; height:auto; }
  #musicOverlay .walkman-panel { display:none; }
}

/* Right column grid sizing to preserve cassette size and prevent cropping. Use auto-fit to step 3->2->1 based on available width. */
#musicOverlay .music-content .music-grid { grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)) !important; max-height: none !important; overflow: visible !important; position:relative; z-index:1; }
/* When the Walkman is visible (two-column layout), the right pane gets ~50% width.
   Below ~1752px viewport width, 3×280px cards + gaps won't fit; force 2 columns. */
@media (max-width: 1751px) and (min-width: 768px) {
  #musicOverlay .music-layout > .music-content > #musicGrid.music-grid {
    grid-template-columns: repeat(2, minmax(280px, 1fr)) !important;
  }
}

/* Filter bar: single-line, full-width. Artist chips scroll horizontally if overflow */
.chipbar { display:flex; flex-wrap:nowrap; align-items:center; gap:8px; width:100%; overflow:hidden; -webkit-appearance:none; appearance:none; padding:2px 0; min-height:44px; }
#artistChips { flex:1 1 auto; min-width:0; display:flex; align-items:center; gap:8px; flex-wrap:nowrap; overflow-x:auto; overflow-y:hidden; white-space:nowrap; scrollbar-width:none; -ms-overflow-style:none; padding:0 32px; }
#artistChips::-webkit-scrollbar { display:none; height:0; }
/* Type filters group pinned to the right */
.type-filters { flex:0 0 auto; display:flex; gap:8px; white-space:nowrap; -webkit-appearance:none; appearance:none; user-select:none; resize:none; }
.chip { display:inline-flex; align-items:center; border:1px solid rgba(255,255,255,0.35); background: rgba(255,255,255,0.08); padding:8px 12px; border-radius:12px; cursor:none; font-size:13px; line-height:1; font-weight:800; color:#fff; text-shadow:0 2px 4px rgba(0,0,0,0.45); transition:transform 0.15s ease, box-shadow 0.15s ease, background-color 0.15s ease, border-color 0.15s ease; -webkit-appearance:none; appearance:none; user-select:none; resize:none; -webkit-user-drag:none; -moz-user-drag:none; user-drag:none; }
.chip.active { background:#fff; color:#111; border-color:#fff; text-shadow:none; box-shadow:0 6px 18px rgba(0,0,0,0.18); }
.chip:hover { background: rgba(255,255,255,0.16); border-color: rgba(255,255,255,0.6); transform: translateY(-1px); }
.chip.missing { opacity: 0.45; }
/* Chip row nav arrows */
.chip-nav { position:absolute; top:50%; transform:translateY(-50%); width:26px; height:26px; border-radius:50%; border:1px solid rgba(255,255,255,0.6); background:rgba(0,0,0,0.35); color:#fff; display:flex; align-items:center; justify-content:center; font-weight:800; line-height:1; cursor:none; z-index:4; box-shadow:0 2px 8px rgba(0,0,0,0.25); }
.chip-nav:hover { background:rgba(255,255,255,0.18); color:#fff; }
.chip-nav-left { left:2px; }
.chip-nav-right { right:2px; }
.chip-nav[aria-hidden="true"] { visibility:hidden; }
.chip-sep { width:1px; height:18px; background:#e6e6e6; margin:0 8px; border-radius:1px; }
/* Hide scrollbar visually but keep scrolling */
 .music-grid { display:grid; grid-template-columns:repeat(4, minmax(0, 1fr)); gap:14px; max-height:none; overflow:visible; padding-top:8px; padding-right:0; scrollbar-width:none; -ms-overflow-style:none; }
.music-grid::-webkit-scrollbar { display:none; }
.card { border:1px solid #eee; border-radius:12px; overflow:hidden; background:#fff; display:flex; flex-direction:column; height:320px; }
.cover-wrap { width:100%; aspect-ratio:1/1; background:#f4f4f4; overflow:hidden; }
.cover-wrap img { width:100%; height:100%; object-fit:cover; display:block; background:transparent; }
.card-body { padding:10px; display:flex; flex-direction:column; gap:4px; flex:1; overflow:hidden; }
.card-title { font-size:14px; font-weight:700; line-height:1.2; height:2.4em; overflow:hidden; text-overflow:ellipsis; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; }
.card-meta { color:#666; font-size:12px; margin-bottom:0; }
.card-bottom { margin-top: auto; display: flex; flex-direction: column; gap: 10px; }
.card-links { display:flex; gap:8px; }
.btn-sm { font-size:12px; padding:6px 8px; border:1px solid #ccc; border-radius:8px; background:#fafafa; text-decoration:none; color:#111; flex:1; text-align:center; }
.btn-sm:hover { background:#f0f0f0; }
.btn-sm.missing { background-color: #ffcccc; color: #ff0000; cursor: default; pointer-events: none; }
.muted { color:#888; font-size:13px; }
.hidden { display:none; }

/* Artists carousel */
.artists-card { max-width:min(1200px,96vw); max-height:min(86vh,980px); display:flex; flex-direction:column; background:transparent !important; box-shadow:none !important; }
.carousel { position:relative; overflow:hidden; user-select:none; border-radius:10px; border:none; background:transparent; overscroll-behavior:contain; width:100%; max-width:1200px; margin:0 auto; }
.carousel-track { display:grid; grid-auto-flow:column; grid-auto-columns:100%; gap:0; padding:0; overflow-x:auto; overflow-y:hidden; scroll-snap-type:x mandatory; scrollbar-width:none; -ms-overflow-style:none; scroll-behavior:smooth; background:transparent; }
.carousel-track::-webkit-scrollbar { display:none; }
.carousel-track::-webkit-scrollbar-thumb { background:#ccc; border-radius:10px; }
.slide { scroll-snap-align:start; border:none; border:radius:0; padding:60px 80px; display:flex; align-items:center; justify-content:center; gap:80px; background:transparent; box-shadow:none; min-height:650px; width:100%; }
.slide-content { display:flex; flex-direction:column; justify-content:center; gap:15px; flex:1; padding-left:20px; }
.portrait { width:auto; height:500px; object-fit:contain; background:transparent; display:block; filter:drop-shadow(0 4px 8px rgba(0,0,0,0.3)); }
.slide-title { font-size:36px; font-weight:800; color:#fff; text-shadow:0 2px 4px rgba(0,0,0,0.5); margin-bottom:16px; }
.slide-bio { font-size:22px; color:#fff; line-height:1.6; white-space:pre-line; text-shadow:0 1px 3px rgba(0,0,0,0.5); max-width:500px; }
.carousel-help { margin-top:8px; text-align:center; }

/* Background music player */
.music-player { position:fixed; bottom:20px; left:20px; z-index:1000; display:flex; align-items:center; gap:12px; background:rgba(255,255,255,0.2); backdrop-filter:blur(10px); border-radius:50%; padding:16px; box-shadow:0 4px 15px rgba(0,0,0,0.05); transition:all 0.4s ease; width:56px; height:56px; }
.music-player.expanded { border-radius:25px; padding:8px 16px; width:auto; height:auto; }
.music-player:hover { background:rgba(255,255,255,0.4); box-shadow:0 6px 20px rgba(0,0,0,0.1); }
.speaker-btn { background:none; border:none; cursor:none; padding:0; display:flex; align-items:center; justify-content:center; transition:all 0.2s ease; }
.speaker-btn:hover { background:rgba(0,0,0,0.1); border-radius:50%; padding:2px; }
.speaker-icon { width:28px; height:28px; color:#fff; font-weight:bold; filter:drop-shadow(0 1px 2px rgba(0,0,0,0.3)); transition:color 0.2s ease; }
.speaker-base { transition:all 0.2s ease; }
.speaker-wave-1, .speaker-wave-2, .speaker-wave-3 { transition:all 0.3s ease; opacity:0; }
.speaker-mute-x { transition:all 0.3s ease; }
.speaker-btn.muted .speaker-icon { color:#fff; opacity:0.8; }
.speaker-btn.muted .speaker-wave-1, .speaker-btn.muted .speaker-wave-2, .speaker-btn.muted .speaker-wave-3 { opacity:0; }
.speaker-btn.muted .speaker-mute-x { opacity:1; }
.volume-slider { width:80px; height:4px; border-radius:2px; background:rgba(255,255,255,0.2); outline:none; cursor:none; transition:all 0.4s ease; -webkit-appearance:none; transform:scaleX(0); transform-origin:left; opacity:0; }
.volume-slider.visible { transform:scaleX(1); opacity:1; }
.volume-slider::-webkit-slider-track { background:rgba(255,255,255,0.2); border-radius:2px; height:4px; }
.volume-slider::-webkit-slider-thumb { appearance:none; width:14px; height:14px; border-radius:50%; background:rgba(100,100,100,0.8); cursor:none; transition:all 0.2s ease; }
.volume-slider::-webkit-slider-thumb:hover { transform:scale(1.2); background:rgba(80,80,80,1); }
.volume-slider::-moz-range-track { background:rgba(255,255,255,0.2); border-radius:2px; height:4px; border:none; }
.volume-slider::-moz-range-thumb { width:14px; height:14px; border-radius:50%; background:rgba(100,100,100,0.8); cursor:none; border:none; }

/* Camera overlay styles */
#documentOverlay .camera-stage {
  position: relative;
  width: calc(var(--design-w) * 1px);
  height: calc(var(--design-h) * 1px);
  transform-origin: center center;
  /* Match the on‑desk size by using the same scale as the homepage stage, with a slight bump */
transform: scale(calc(var(--stage-scale, 0.6) * 1.5));
}
.camera-overlay { position: absolute; top:0; left:0; width:100%; height:100%; object-fit: contain; user-select:none; z-index:2; pointer-events:none; }
.camera-content { position:absolute; top:0; left:0; width:100%; height:100%; z-index:1; }
.camera-close { position:absolute; top:20px; right:20px; z-index:3; background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); border:1px solid rgba(255,255,255,0.2); color:#fff; font-size:28px; width:50px; height:50px; border-radius:50%; display:flex; align-items:center; justify-content:center; cursor:none; }

/* Document viewer area (matches YouTube LCD area) */
.document-viewer { position:absolute; left:7.24%; top:31%; width:57.69%; height:48%; display:flex; flex-direction:column; gap:15px; }
.viewer-buttons { display:grid; grid-template-columns: repeat(10, 1fr); gap:6px; padding:8px; background: rgba(0,0,0,0.6); backdrop-filter: blur(10px); border-radius:8px; }
.viewer-btn { padding:10px 6px; border:none; background: rgba(255,255,255,0.1); color:#fff; font-size:13px; border-radius:6px; cursor:none; transition:all .2s ease; }
.viewer-btn.active { background: rgba(255,255,255,0.3); border:1px solid rgba(255,255,255,0.5); }
.viewer-content { flex:1; display:flex; flex-direction:column; }
.video-container { height: calc(100% - 80px); background:#000; border-radius:8px; overflow:hidden; position:relative; }
#youtube-player { width:100%; height:100%; }
/* Filter bar controls */
 .playlist-nav { display:flex; align-items:center; gap:20px; padding:10px; background: rgba(0,0,0,0.6); backdrop-filter: blur(10px); border-radius:8px; }
.nav-btn { width:40px; height:40px; border:none; background: rgba(255,255,255,0.1); color:#fff; border-radius:50%; cursor:none; display:flex; align-items:center; justify-content:center; }
.video-info { flex:1; text-align:center; color:#fff; }
.year-content { flex:1; background: rgba(0,0,0,0.8); border-radius:8px; padding:20px; overflow:auto; color:#fff; }

/* Music overlay: transparent container and cassette overlay on cards */
#musicOverlay .overlay-card {
  background: transparent !important;
  box-shadow: none !important;
  border: none !important;
}

/* Make song cards match cassette case aspect and place overlay above content */
#musicOverlay .music-grid .card {
  position: relative;
  height: auto !important; /* override fixed heights */
  aspect-ratio: var(--cassette-w, 2) / var(--cassette-h, 3);
  background: transparent;
  border: none;
  overflow: hidden; /* ensure nothing spills outside the cassette bounds */
  /* subtle hover motion */
  --hover-raise: 6px;
  transition: transform 150ms ease-out, box-shadow 150ms ease-out;
  will-change: transform;
}

/* Safe content area inside the cassette frame */
#musicOverlay .music-grid .card-inner {
  position: absolute;
  top: var(--case-pad-t, var(--case-pad, 2.75%));
  right: var(--case-pad-r, var(--case-pad, 2.75%));
  bottom: var(--case-pad-b, var(--case-pad, 2.75%));
  left: var(--case-pad-l, var(--case-pad, 2.75%));
  display: flex;
  flex-direction: column;
  gap: 8px;
  overflow: hidden; /* clip artwork/text to the safe area */
  border-radius: 8px; /* slight rounding to match inner window */
}

#musicOverlay .music-grid .card::after {
  content: '';
  position: absolute;
  inset: 0;
  background-image: url('assets/Cassette Case.png');
  background-repeat: no-repeat;
  background-position: center;
  background-size: contain; /* keep exact proportions */
  pointer-events: none; /* allow clicks/highlight through */
  z-index: 5;
}

/* Auto-contrast text colors via classes set by JS */
#musicOverlay .music-grid .card.card-dark {
  color: #ffffff;
}
#musicOverlay .music-grid .card.card-dark .card-meta,
#musicOverlay .music-grid .card.card-dark .btn-sm { color: #f1f1f1; }
#musicOverlay .music-grid .card.card-dark .btn-sm { border-color: rgba(255,255,255,0.5); background: rgba(255,255,255,0.15); }
#musicOverlay .music-grid .card.card-dark .btn-sm:hover { background: rgba(255,255,255,0.25); }

#musicOverlay .music-grid .card.card-light {
  color: #111111;
}
#musicOverlay .music-grid .card.card-light .card-meta,
#musicOverlay .music-grid .card.card-light .btn-sm { color: #2b2b2b; }
#musicOverlay .music-grid .card.card-light .btn-sm { border-color: #ccc; background: #fafafa; }
#musicOverlay .music-grid .card.card-light .btn-sm:hover { background: #f0f0f0; }

/* Hover lift for pointer devices */
@media (hover: hover) and (pointer: fine) {
  #musicOverlay .music-grid .card:hover {
    transform: translateY(calc(-1 * var(--hover-raise))) scale(1.005);
    box-shadow: 0 8px 20px rgba(0,0,0,0.18);
  }
  #musicOverlay .music-grid .card:active {
    transform: translateY(calc(-1 * var(--hover-raise) / 2)) scale(1.002);
  }
}

/* Ensure desktop override doesn't force a fixed height */
@media (min-width: 768px) {
  #musicOverlay .music-grid .card { height: auto !important; }
}

/* Ensure mobile cards aren't forced to a fixed height */
@media (max-width: 767px) {
  #musicOverlay .music-grid .card { height: auto !important; }
}
